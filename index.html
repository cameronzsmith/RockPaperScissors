<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>Rock, Paper, Scissors!</title>
    </head>
    <body>
        <script>
            // Randomly returns rock, paper, or scissors.
            function computerPlay() {
                let randomNumber = Math.floor(Math.random() * 3); // Generates a random number between 0 and 2

                // TODO: could return an integer instead of string and then write a helper function converting input indexes into strings
                switch(randomNumber) {
                    case 0:
                        return "rock"; break;
                    case 1:
                        return "paper"; break;
                    case 2:
                        return "scissors"; break;
                    default:
                        return null; break;
                }
            }

            // Plays a round of rock, paper, scissors.
            function playRound(playerSelection, computerSelection) {

                if(checkWinConditions(playerSelection, computerSelection)) {
                    return "win";
                } else if(playerSelection == computerSelection) { 
                    return "draw";
                }

                return "lose";
            }

            // Plays the game until it reaches the number passed as an argument.
            function game(numRounds) {
                let playerScore = 0;
                let computerScore = 0;

                while(!checkWinner(playerScore, computerScore, numRounds)) {
                    const playerSelection = prompt("Please enter 'rock', 'paper', or 'scissors' without any quotation marks: ").toLowerCase();
                    const computerSelection = computerPlay();
                    const result = playRound(playerSelection, computerSelection);

                    console.log("You chose: " + playerSelection);
                    console.log("Computer chose: " + computerSelection);

                    if(result == "win") {
                        playerScore++;
                    } else if(result == "lose") {
                        computerScore++;
                    }

                    console.log("You " + result + "!");
                    console.log("Player's score: " + playerScore);
                    console.log("Computer's score: " + computerScore);
                }
            }

            // Helper function that determines if a winner has been found.
            function checkWinner(playerScore, computerScore, maxScore ) {
                if(playerScore >= maxScore) {
                    console.log("Player wins!");
                    return true;
                }
                else if(computerScore >= maxScore) {
                    console.log("Computer wins!");
                    return true;
                }

                return false;
            }

            // Helper function which checks for win conditions
            function checkWinConditions(playerSelection, computerSelection) {
                if(playerSelection == "rock" && computerSelection == "scissors" ||
                   playerSelection == "paper" && computerSelection == "rock" ||
                   playerSelection == "scissors" && computerSelection == "paper") 
                    return true;

                return false;
            }

            game(5); // plays game 5 times
        </script>
    </body>
</html>